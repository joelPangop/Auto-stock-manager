<div class="auth-wrapper">
  <mat-card class="auth-card" appearance="outlined">
    <h1>Connexion</h1>

    <form class="auth-form" [formGroup]="form" (ngSubmit)="submit()">
      <!-- Email -->
      <mat-form-field appearance="outline" class="field">
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" autocomplete="username" placeholder="joel@example.com" />
        <mat-error *ngIf="form.controls.email.hasError('required')">Requis</mat-error>
        <mat-error *ngIf="form.controls.email.hasError('email')">Email invalide</mat-error>
      </mat-form-field>

      <!-- Mot de passe -->
      <mat-form-field appearance="outline" class="field">
        <mat-label>Mot de passe</mat-label>
        <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" autocomplete="current-password" placeholder="••••••••" />
        <button mat-icon-button matSuffix type="button" (click)="hide = !hide" aria-label="Afficher/Masquer le mot de passe" class="toggle">
          <mat-icon>{{ hide ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
        <mat-error *ngIf="form.controls.password.hasError('required')">Requis</mat-error>
        <mat-error *ngIf="form.controls.password.hasError('minlength')">6 caractères min.</mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" class="btn" [disabled]="loading || form.invalid">
        <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
        <span *ngIf="!loading">Se connecter</span>
      </button>

      <div class="meta">
        <span></span>
        <a routerLink="/forgot">Mot de passe oublié ?</a>
      </div>
      <div class="meta" *ngIf="isAdmin">
        <span>Nouveau ?</span>
        <a routerLink="/register">Créer un compte</a>
      </div>
    </form>
  </mat-card>
</div>
